@page "/editmaterial"
@inject NavigationManager NavigationManager
@inject UserService UserService
@inject ProductService ProductService
@inject MaterialService MaterialService
@using MongoDB.Bson;
@using MongoDB.Bson.Serialization.Attributes;
@using Microsoft.AspNetCore.Hosting
@inject IWebHostEnvironment env
@using System.IO
@using TireCompany.Data

<head>
    <link href="css/editmaterial.css" rel="stylesheet" />
</head>
<div class="editmaterial">
    <div class="editmaterial_form">
        <h1>Изменить продукт</h1>
        <form>
            <div class="input_box">

              
                <input type="text" placeholder="Название" @bind-value="@title" />
                @if (error != null)
                {
                    <p class="error">@error</p>
                }
                <a class="btn_addmaterial" @onclick="Save">Сохранить</a>


            </div>
        </form>
    </div>
</div>
@code{

    Material material;
    string title = "";
    string error;
    protected override async Task OnInitializedAsync()
    {
        material = Database.FindMaterialById(MaterialService.MaterialId);
        title = material.Title; 
    }
    private void Save()
    {
        if(title==""){
            error = "Заполните название";
        }
        else
        {
            Database.EditMaterial(MaterialService.MaterialId, new Material(title));
            NavigationManager.NavigateTo("/lookmaterials");
        }
    }

}